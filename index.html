<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <script src='timeago.js'></script>
  </head>
  <body>
    <script>

      //create a HTML object that represents each tweet as a <div> with <spans> for user and time
      function createTweetJQObj(tweet) {
        var $tweet = $('<div>: '+tweet.message+'</div>');    
        //create span for username
        var $user = $('<span class=\'user\'>@'+tweet.user+'</span>');
        $tweet.prepend($user);
        //create span for time
        var $time = $('<span class=\'time\'>\t['+jQuery.timeago(tweet.created_at)+']</span>');      
        $tweet.append($time);        
        return $tweet;
      }

      //function that will display all tweets stored in streams.home
      function displayTweets() {
        $('#tweets').find('div').remove(); //clear all tweets

        var index = streams.home.length - 1; //set index to most recent tweet
        while(index >= 0) {
          var $tweet = createTweetJQObj(streams.home[index]); //create HTML element with jQuery object
          $tweet.appendTo($('#tweets')); //add tweet to div display          
          index -= 1;
        }
      }

      //display all tweets by a particular user stored in streams.users
      function displayUserTweets(userName) {
        $('#tweets').find('div').remove();

        var index = streams.users[userName].length - 1;
        while(index >=  0) {
          var $tweet = createTweetJQObj(streams.users[userName][index]);
          $tweet.appendTo($('#tweets'));
          index -= 1;
        }
      }

      $(document).ready(function(){
        displayTweets();

        $('#update').on('click', function() {
          displayTweets();
        });

      });

    </script>

    <h2>
      <span>TWITTLER</span>
    </h2>
    <div id='buttons'>
      <button id='update'>Update Full Twittler Feed</button>        
    </div>    
    <div id='tweets'></div>
  </body>
</html>
